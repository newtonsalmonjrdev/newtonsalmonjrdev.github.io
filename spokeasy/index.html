<html>
  <head>
    
    <meta charset="UTF-8" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Spokeasy</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.1.0/math.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.sound.min.js"></script>
    <!-- <script
      src="https://unpkg.com/ml5@latest/dist/ml5.min.js"
      type="text/javascript"
    ></script> -->
    <script src="https://unpkg.com/ml5@0.12.2/dist/ml5.min.js"></script>

    <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ml5/0.12.2/ml5.min.js"
      type="text/javascript"
    ></script> -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <link defer rel="stylesheet" href="style.scss" />
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-half"></div>

        <div class="col-8 border border-4 p2">
          <h3 class="text-center title">Bike Truing via Pitch Detection</h3>
          <p>
            The purpose of this project is to provide an alternate way to true a
            bike using the pitch produced upon striking a bicycle spoke. While
            this method is quite effective, it requires that the user has
            exceptional pitch perception and discernment, making this method
            rather inaccesible, further increasing the difficulty of the
            process. A trued (round) wheel should be accessible to all, it has
            greatly enhanced the experience of riding a bike for me as for
            others that utilize this application.
          </p>
          <div class="happytrue">
            <p>ðŸš² Thanks for stopping by and Happy Truing! ðŸš²</p>
          </div>
          <div class="row">
            <div class="col-6 border border-0 p2">
              <p id="status">
                Status: Loading Model. Please Restart Browser and accept Mic
                Permission
              </p>
              <div>
                <p>Current Pitch:</p>
                <p id="result">No pitch detected</p>
              </div>
            </div>
            <div class="col-6 border border-0 p2">
              <form id="targetPitchForm" action="">
                <label for="pitchspokelabel">Target Pitch: </label>
                <input
                  id="targetPitch"
                  name="targetPitchSpokeInput"
                  type="number"
                  maxlength="5"
                  size="7"
                  min="1"
                  max="20154"
                  autocomplete="off"
                />
                <button type="button" id="targetPitchBut">Enter</button>
              </form>
              
              <!-- Lower Limit Form -->
              <form id="lowerLimitForm" action="">
                <label for="pitchspokelabel">Lower Limit: </label>
                <input
                  id="lowerLimit"
                  name="lowerLimitInput"
                  type="number"
                  maxlength="5"
                  size="7"
                  min="1"
                  max="20154"
                  autocomplete="off"
                />
                <button type="button" id="lowerLimitBut">Enter</button>
              </form>
              
              <!-- Upper Limit Form -->
              <form id="upperLimitForm" action="">
                <label for="pitchspokelabel">Upper Limit: </label>
                <input
                  id="upperLimit"
                  name="upperLimitInput"
                  type="number"
                  maxlength="5"
                  size="7"
                  min="1"
                  max="20154"
                  autocomplete="off"
                />
                <button type="button" id="upperLimitBut">Enter</button>
              </form>
            </div>
          </div>
          <div class="form-control border border-4 p2">
            <!-- <form action="">
              <label for="numspokes"> Number of Spokes:</label>
              <select name="spoke" id="spokenum" autocomplete="off">
                <option value="24">24</option>
                <option value="28">28</option>
                <option value="32">32</option>
                <option value="36">36</option>
                <option value="48">48</option>
              </select>
              <button id="formpush" type="button">Add to Table</button> -->
            <!--<button id="button" type="button">Activate</button>-->
            <!-- </form> -->
            <!-- <form action="">
              <label for="tpitch"> Set Target Pitch: </label>
              <input
                name="tpitch"
                type="number"
                id="tpitch"
                maxlength="5"
                size="7"
                min="1"
                max="20154"
                autocomplete="off"
              />
              <button type="button" id="tpitchbut">Enter</button>
            </form> -->
            <!-- <form action="">
              <label for="pitchspokelabel"> Input Pitch: </label>
              <input
                name="pitchspoke"
                type="number"
                id="spokepitchid"
                maxlength="5"
                size="7"
                min="1"
                max="20154"
                autocomplete="off"
              />
              <button type="button" id="spokepitchbut">Enter</button>
            </form> -->
            <!-- <form action="">
       
              <label> Spoke Number: </label>
              <input
                id="entryval"
                type="number"
                name="spokeentry"
                min="1"
                max="24"
                autocomplete="off"
              />
            </form> -->
            <!-- <button id="spokeentrybut" type="button">Add to Table</button>
            <button id="cleartablebut" onClick="window.location.reload(true);">
              Clear Table
            </button> -->
            <br /><br />
            <div id="sketch-holder">
              <!-- <div id="matchingcanvasDiv"></div> -->
              <!-- <canvas id="drawingCanvas" width="300" height="300"></canvas> -->
              <canvas id="drawingCanvas" height="300"></canvas>
            </div>
            <!-- <div id="canvasContainer">
              <div id="matchingDiv"></div>
              <canvas id="drawingCanvas" width="300" height="300"></canvas>
            </div> -->
            <!-- <label class="form-label" id="volumesliderlabel" for="volumeslider">
              Adjust Mic Sensitivity:
            </label> -->
            <div style="text-align: left; margin-bottom: 10px;">
              <!-- Centered Label Above Slider -->
              <label class= "micLabel" id="volumesliderlabel" for="volumeslider">
                Mic Sensitivity:
              </label>
            </div>
            <div style="display: flex; align-items: center; margin-bottom:10px;">
              <!-- Left Label -->
              <span >More</span>
            
              <!-- Slider -->
              <input
                class="form-control"
                type="range"
                id="setvolume"
                name="volumeslider"
                min="0"
                max="0.02"
                step="0.005"
                style="flex-grow: 1; margin: 0 10px;"
              />
            
              <!-- Right Label -->
              <span >Less</span>
            </div>
            
          <div class="mobilecanvastunerdiv"></div>
          <div class="border border-4 p2">
            <h2 id="spoketabletitle" class="text-center">Spoke Pitch Table</h2>
            <label for="spokenum"
              >Select the number of spokes and enter pitch:</label
            >
            <select id="spokenum">
              <option value="24">24</option>
              <option value="28">28</option>
              <option value="32">32</option>
              <option value="36">36</option>
              <option value="48">48</option>
            </select>
            <button id="generatetableid">Generate Table</button>
            <button onclick="validateTableInputs()">Validate Inputs</button>

            <button id="cleartableid">Clear Table</button>

            <table id="spoketable" class="table">
              <thead></thead>
              <tbody>
                <!-- Rows will be dynamically added here -->
              </tbody>
            </table>
          </div>
          <div class="border border-4 p2">
            <div class="bikebox">
              <div id="smallradialid" class="radStart radEnd smallradial">
                <svg width="150" height="150"></svg>
              </div>
              <div class="circle borderc" id="classborderid"></div>
              <div class="largeradial" id=" largeradialid">
                <svg width="400" height="400">
                  <image href="smallradialimg.svg" height="325" width="325" />
                </svg>
              </div>
              <div class="pennyfar">
                <svg width="400" height="400">
                  <image
                    href="pennyfarvectorCrop.svg"
                    width="400"
                    height="400"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>
        <div class="outsidebox">
          <div class="largeradialout">
            <svg width="300" height="300">
              <image href="smallradialimg.svg" height="225" width="225" />
            </svg>
          </div>
          <div class="circleout"></div>
          <div class="smallradialout"></div>
          <div class="pennyfarout">
            <svg width="300" height="300">
              <image href="pennyfarvectorCrop.svg" width="300" height="300" />
            </svg>
          </div>
        </div>

        <div class="col-half">
          <h3></h3>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
